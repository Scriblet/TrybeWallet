(this["webpackJsonptrybe-wallet"]=this["webpackJsonptrybe-wallet"]||[]).push([[0],{38:function(e,t,a){e.exports=a.p+"static/media/logo.17fb69ad.webp"},40:function(e,t,a){e.exports=a(55)},45:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(24),l=a.n(c),i=a(30),o=(a(45),a(12)),s=a(7),u=a(21),p=a(16),d=a(17),m=a(13),h=a(19),E=a(18),b=a(57),v=a(58),f=a(9),g=a.n(f),y=a(20),x=function(){var e=Object(y.a)(g.a.mark((function e(){var t,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://economia.awesomeapi.com.br/json/all",e.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(e){return{type:"EXPENSES_ADD_VALUE",expense:e}},C=function(e,t){return{type:"TOGGLE_FORMS",edit:e,currentId:t}},j=function(e){Object(h.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).eventHandle=e.eventHandle.bind(Object(m.a)(e)),e.validInputs=e.validInputs.bind(Object(m.a)(e)),e.redirectWallet=e.redirectWallet.bind(Object(m.a)(e)),e.state={email:"",password:""},e}return Object(d.a)(a,[{key:"eventHandle",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(u.a)({},n,a))}},{key:"validInputs",value:function(){var e=this.state,t=e.email,a=e.password;return/^((?!\.)[\w-_.]*[^.])(@\w+)(\.\w+(\.\w+)?[^.\W])$/gm.test(t)&&a.length>=6}},{key:"redirectWallet",value:function(){var e=this.state.email,t=this.props,a=t.history,n=t.emailText;a.push("/carteira"),n(e)}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password;return r.a.createElement(b.a,{style:{margin:"32px"}},r.a.createElement("h1",null,"Login Page"),r.a.createElement(b.a.Group,{controlId:"formBasicEmail"},r.a.createElement(b.a.Label,null,"Email",r.a.createElement(b.a.Control,{type:"email","data-testid":"email-input",name:"email",value:t,onChange:this.eventHandle}))),r.a.createElement(b.a.Group,{controlId:"formBasicPassword"},r.a.createElement(b.a.Label,null,"Password",r.a.createElement(b.a.Control,{type:"password","data-testid":"password-input",name:"password",value:a,onChange:this.eventHandle}))),r.a.createElement(v.a,{type:"button",disabled:!this.validInputs(),onClick:this.redirectWallet},"Entrar"))}}]),a}(r.a.Component),k=Object(o.b)((function(e){return{email:e.user.email}}),(function(e){return{emailText:function(t){return e(function(e){return{type:"CLICK_UPDATE_EMAIL_VALUE",payload:e}}(t))}}}))(j),w=a(38),S=a.n(w),D=a(6),L=function(e){Object(h.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).handleChange=e.handleChange.bind(Object(m.a)(e)),e.buttonClick=e.buttonClick.bind(Object(m.a)(e)),e.state={methodOptions:["Dinheiro","Cart\xe3o de cr\xe9dito","Cart\xe3o de d\xe9bito"],tagOptions:["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"],expense:{value:"",description:"",currency:"",method:"",tag:""}},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(y.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.getCurrenciesDispatch,e.next=3,t();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState((function(e){return{expense:Object(D.a)(Object(D.a)({},e.expense),{},Object(u.a)({},a,n))}}))}},{key:"buttonClick",value:function(){var e=Object(y.a)(g.a.mark((function e(){var t,a,n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.buttonExpensesDispatch,n=t.getCurrenciesDispatch,r=this.state.expense,e.next=4,n();case 4:a(r),this.setState({expense:{value:"",description:"",currency:"",method:"",tag:""}});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.currenciesState,t=this.state,a=t.methodOptions,n=t.tagOptions,c=t.expense,l=c.value,i=c.description,o=c.currency,s=c.method,u=c.tag;return r.a.createElement(b.a,null,r.a.createElement(b.a.Group,null,r.a.createElement(b.a.Label,{htmlFor:"value-input"},"Valor:",r.a.createElement(b.a.Control,{type:"text","data-testid":"value-input",id:"value-input",name:"value",value:l,onChange:this.handleChange})),r.a.createElement(b.a.Label,{htmlFor:"description-input"},"Descri\xe7\xe3o:",r.a.createElement(b.a.Control,{type:"text","data-testid":"description-input",id:"description-input",name:"description",value:i,onChange:this.handleChange})),r.a.createElement(b.a.Group,null,r.a.createElement(b.a.Label,null,"Moeda",r.a.createElement(b.a.Control,{as:"select",className:"currency-input","data-testid":"currency-input",name:"currency",value:o,onChange:this.handleChange},r.a.createElement("option",{selected:!0},"Selecione a sua moeda"),e.map((function(e){return r.a.createElement("option",{key:e,"data-testid":e},e)})))),r.a.createElement(b.a.Label,null,"Forma de Pagamento",r.a.createElement(b.a.Control,{as:"select",className:"method-input","data-testid":"method-input",name:"method",value:s,onChange:this.handleChange},r.a.createElement("option",{selected:!0},"Selecione o pagamento"),a.map((function(e){return r.a.createElement("option",{key:e,"data-testid":e},e)})))),r.a.createElement(b.a.Label,null,"Categoria",r.a.createElement(b.a.Control,{as:"select",className:"tag-input","data-testid":"tag-input",name:"tag",value:u,onChange:this.handleChange},r.a.createElement("option",{selected:!0},"Selecione a categoria da despesa"),n.map((function(e){return r.a.createElement("option",{key:e,"data-testid":e},e)}))))),r.a.createElement(v.a,{variant:"success",type:"button",onClick:this.buttonClick},"Adicionar despesa")))}}]),a}(r.a.Component),_=Object(o.b)((function(e){return{currenciesState:e.wallet.currencies}}),(function(e){return{getCurrenciesDispatch:function(){return e(function(){var e=Object(y.a)(g.a.mark((function e(t){var a,n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:a=e.sent,n=Object.keys(a),r=n.filter((function(e){return"USDT"!==e})),t({type:"CURRENCY_UPDATE_VALUE",currencies:r,rates:a});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},buttonExpensesDispatch:function(t){return e(O(t))}}}))(L),F=a(56),A=function(e){Object(h.a)(a,e);var t=Object(E.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"filterName",value:function(e){return this.props.expensesState[0].exchangeRates[e.currency].name}},{key:"filterExchange",value:function(e){var t=this.props.expensesState[0].exchangeRates[e.currency];return parseFloat(t.ask).toFixed(2)}},{key:"convertedValue",value:function(e){var t=this.props.expensesState[0].exchangeRates[e.currency].ask*e.value;return parseFloat(t).toFixed(2)}},{key:"deleteRow",value:function(e){(0,this.props.deleteRowDispatch)(e)}},{key:"toggleForm",value:function(e){(0,this.props.toggleFormDispatch)(!0,e)}},{key:"render",value:function(){var e=this,t=this.props.expensesState;return r.a.createElement("div",null,r.a.createElement(F.a,{striped:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir"))),r.a.createElement("tbody",null,t.map((function(t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.tag),r.a.createElement("td",null,t.method),r.a.createElement("td",null,"".concat(parseFloat(t.value))),r.a.createElement("td",null,e.filterName(t)),r.a.createElement("td",null,"".concat(e.filterExchange(t))),r.a.createElement("td",null,e.convertedValue(t)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement(v.a,{size:"sm",type:"button","data-testid":"edit-btn",onClick:function(){return e.toggleForm(t.id)}},"Editar"),r.a.createElement(v.a,{size:"sm",variant:"danger",type:"button","data-testid":"delete-btn",onClick:function(){return e.deleteRow(t.id)}},"Excluir")))})))))}}]),a}(r.a.Component),T=Object(o.b)((function(e){return{expensesState:e.wallet.expenses}}),(function(e){return{deleteRowDispatch:function(t){return e({type:"EXPENSES_DELETE_VALUE",id:t})},toggleFormDispatch:function(t,a){return e(C(t,a))}}}))(A),N=function(e){Object(h.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).handleChange=e.handleChange.bind(Object(m.a)(e)),e.buttonClick=e.buttonClick.bind(Object(m.a)(e)),e.state={methodOptions:["Dinheiro","Cart\xe3o de cr\xe9dito","Cart\xe3o de d\xe9bito"],tagOptions:["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"],expense:{value:"",description:"",currency:"",method:"",tag:""}},e}return Object(d.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState((function(e){return{expense:Object(D.a)(Object(D.a)({},e.expense),{},Object(u.a)({},a,n))}}))}},{key:"buttonClick",value:function(){var e=Object(y.a)(g.a.mark((function e(){var t,a,n,r,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props,a=t.editExpensesDispatch,n=t.editId,r=t.toggleFormDispatch,c=this.state.expense,a(n,c),this.setState({expense:{value:"",description:"",currency:"",method:"",tag:""}}),r(!1);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.currenciesState,t=this.state,a=t.methodOptions,n=t.tagOptions,c=t.expense,l=c.value,i=c.description,o=c.currency,s=c.method,u=c.tag;return r.a.createElement(b.a,{className:"edit-form"},r.a.createElement(b.a.Group,null,r.a.createElement(b.a.Label,{htmlFor:"value-input"},"Valor editado:",r.a.createElement(b.a.Control,{type:"text","data-testid":"value-input",id:"value-input",name:"value",value:l,onChange:this.handleChange})),r.a.createElement(b.a.Label,{htmlFor:"description-input"},"Descri\xe7\xe3o:",r.a.createElement(b.a.Control,{type:"text","data-testid":"description-input",id:"description-input",name:"description",value:i,onChange:this.handleChange}))),r.a.createElement(b.a.Label,null,r.a.createElement(b.a.Control,{as:"select",className:"currency-input","data-testid":"currency-input",name:"currency",value:o,onChange:this.handleChange},r.a.createElement("option",{selected:!0},"Selecione a sua moeda"),e.map((function(e){return r.a.createElement("option",{key:e,"data-testid":e},e)})))),r.a.createElement(b.a.Label,null,r.a.createElement(b.a.Control,{as:"select",className:"method-input","data-testid":"method-input",name:"method",value:s,onChange:this.handleChange},r.a.createElement("option",{selected:!0},"Selecione o pagamento"),a.map((function(e){return r.a.createElement("option",{key:e,"data-testid":e},e)})))),r.a.createElement(b.a.Label,null,r.a.createElement(b.a.Control,{as:"select",className:"tag-input","data-testid":"tag-input",name:"tag",value:u,onChange:this.handleChange},r.a.createElement("option",{selected:!0},"Selecione a categoria da despesa"),n.map((function(e){return r.a.createElement("option",{key:e,"data-testid":e},e)})))),r.a.createElement(v.a,{type:"button",onClick:this.buttonClick},"Editar despesa"))}}]),a}(r.a.Component),I=Object(o.b)((function(e){return{currenciesState:e.wallet.currencies,editId:e.wallet.editingExpense}}),(function(e){return{buttonExpensesDispatch:function(t){return e(O(t))},editExpensesDispatch:function(t,a){return e({type:"EXPENSES_UPDATE_VALUE",idExpense:t,editExpense:a})},toggleFormDispatch:function(t,a){return e(C(t,a))}}}))(N),R=function(e){Object(h.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this)).state={currency:"BRL"},e}return Object(d.a)(a,[{key:"totalValue",value:function(){return this.props.expensesState.reduce((function(e,t){return e+parseFloat(t.value)*parseFloat(t.exchangeRates[t.currency].ask)}),0)}},{key:"render",value:function(){var e=this.state.currency,t=this.props,a=t.email,n=t.typeForm;return console.log(n),r.a.createElement("div",null,r.a.createElement("div",{className:"header-wallet",style:{color:"white",fontFamily:"Poppins",padding:"32px"}},"TrybeWallet",r.a.createElement("header",null,r.a.createElement("img",{src:S.a,alt:"Logo Trybe",className:"logo-header"}),r.a.createElement("div",null,r.a.createElement("p",{"data-testid":"email-field"},a),r.a.createElement("p",null,"Despesa Total:",r.a.createElement("span",{"data-testid":"header-currency-field"},e),r.a.createElement("span",{"data-testid":"total-field"},this.totalValue())))),n?r.a.createElement(I,null):r.a.createElement(_,null)),r.a.createElement("div",null,r.a.createElement(T,null)))}}]),a}(r.a.Component),U=Object(o.b)((function(e){return{email:e.user.email,expensesState:e.wallet.expenses,typeForm:e.wallet.toggleForm}}),null)(R);a(52);var V=function(){return r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:k}),r.a.createElement(s.a,{exact:!0,path:"/carteira",component:U}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=a(22),M=a(39),G={email:""},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLICK_UPDATE_EMAIL_VALUE":return Object(D.a)(Object(D.a)({},e),{},{email:t.payload});default:return e}},X=a(26),z={currencies:[],expenses:[],nextId:0,rates:{},toggleForm:!1},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CURRENCY_UPDATE_VALUE":return Object(D.a)(Object(D.a)({},e),{},{currencies:t.currencies,rates:t.rates});case"EXPENSES_ADD_VALUE":return t.expense.id=e.nextId,t.expense.exchangeRates=e.rates,Object(D.a)(Object(D.a)({},e),{},{expenses:[].concat(Object(X.a)(e.expenses),[t.expense]),nextId:e.nextId+1});case"EXPENSES_DELETE_VALUE":return Object(D.a)(Object(D.a)({},e),{},{expenses:e.expenses.filter((function(e){return e.id!==t.id}))});case"TOGGLE_FORMS":return Object(D.a)(Object(D.a)({},e),{},{toggleForm:t.edit,editingExpense:t.currentId});case"EXPENSES_UPDATE_VALUE":var a=t.idExpense,n=Object(X.a)(e.expenses);return n[a]=Object(D.a)(Object(D.a)({},t.editExpense),{},{exchangeRates:e.expenses[a].exchangeRates,id:e.expenses[a].id}),Object(D.a)(Object(D.a)({},e),{},{expenses:Object(X.a)(n)});default:return e}},H=Object(P.c)({user:W,wallet:B}),J=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||P.d,K=Object(P.e)(H,J(Object(P.a)(M.a)));a(54);l.a.render(r.a.createElement(i.a,null,r.a.createElement(o.a,{store:K},r.a.createElement(V,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.5b9e1344.chunk.js.map